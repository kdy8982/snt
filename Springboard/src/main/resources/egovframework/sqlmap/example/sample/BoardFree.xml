<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="BoardFree">
    
    <typeAlias alias="egovMap"
		type="egovframework.rte.psl.dataaccess.util.EgovMap" />
	<typeAlias alias="BoardFreeVO" type="com.snt.Springboard.domain.BoardFreeVO" />

	<resultMap id="boardFree" class="com.snt.Springboard.domain.BoardFreeVO">
		<result property="board_title" column="free_board_title" />
		<result property="department_name" column="department_name" />
		<result property="board_create_date" column="free_create_date" />
		<result property="board_name" column="free_board_name" />
		<result property="employee_name" column="employee_name" />
		<result property="board_id" column="free_board_id" />
		<result property="department_id" column="department_id" />
		<result property="employee_id" column="employee_id" />
		<result property="board_content" column="free_board_content" />
	</resultMap>
	<select id="freeDao.selectBoardFree" resultClass="boardFreeVO"
		parameterClass="boardFreeVO">
		select * from
		(
		select A.board_id, A.board_title, A.board_content, A.board_name, a.board_create_date, B.department_name, C.employee_name from (
			select free_board_id board_id, free_board_title board_title, free_board_content board_content, free_board_name board_name, to_char(free_board_create_date,'YYYYMMDDHH24MISS') board_create_date, department_id, employee_id
				from 
					(
						select * from free_board free
						union
						select * from notice_board notice
					)
		) A, department B, employee C
		where
		a.department_id = b.department_id and 
		a.employee_id = c.employee_id
		order by board_create_date desc
		)
		where board_id = #board_id# and board_name= #board_name#
	</select>
	<insert id="freeDao.insertBoardFree" parameterClass="boardFreeVO">
		<![CDATA[
			INSERT INTO FREE_BOARD
				( FREE_BOARD_ID 
				  , FREE_BOARD_TITLE
				  , DEPARTMENT_ID
				  , FREE_BOARD_CREATE_DATE
				  , FREE_BOARD_NAME
				  , EMPLOYEE_ID
				  , FREE_BOARD_CONTENT )
			VALUES (
				free_board_seq.nextval,
				#board_title#,
				#department_id#,
				TO_DATE(sysdate),
				'자유',
				#employee_id#,
				#board_content#)
		]]>
	</insert>
	<update id="freeDao.updateBoardFree" parameterClass="boardFreeVO">
		<![CDATA[
			UPDATE FREE_BOARD
			SET 
			FREE_BOARD_TITLE=#board_title#
		  , FREE_BOARD_CONTENT=#board_content#
			WHERE FREE_BOARD_ID=#board_id#
		]]>
	</update>
	<delete id="freeDao.deleteBoardFree">
	    delete from 
	    free_board where free_board_id=#board_id#
	</delete>
</sqlMap>